# 트랜잭션

## 개념
서버가 DB와 커넥션 연결 -> DB 세션생성 -> 세션 트랜잭션 생성 -> SQL 구문 실행 -> 트랜잭션 종료

## PlatformTransactionManager

각 DB 기술마다 서로 다른 트랜잭션 연결 코드를 추상화한 인터페이스.

DB기술에 맞게 구현체가 있다. 
ex) JpaTransactionManager.

## 관련 method

~~~java
AopUtils.isAopProxy(Object object)
~~~
Check whether the given object is a JDK dynamic proxy or a CGLIB proxy.
boolean 반환.


~~~java
TransactionSynchronizationManager.isActualTransactionActive();
~~~
현재 쓰레드에 트랜잭션이 적용되어 있는지 확인하는 메서드.

~~~java
TransactionSynchronizationManager.isCurrentTransactionReadOnly()
~~~
현재 트랜잭션이 readOnly인지 아닌지 boolean 반환.

## 기억해야될 점.
1. @Transactional을 구체적인 곳에 붙을 수록 우선순위를 가진다. 
   1. 클래스 method
   2. 클래스
   3. 인터페이스 method
   4. 인터페이스

2. 클래스에 @Transactional이 붙으면 method에도 자동 적용된다.

3. 프록시 내부 호출 
   1. 